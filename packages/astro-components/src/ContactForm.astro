---
interface Props {
  target: string;
  title?: string;
  subtitle?: string;
  accentColor?: string;
}

const {
  target,
  title = 'Contact Us',
  subtitle = 'Fill out the form below and we\'ll get back to you within 24 hours.',
  accentColor = 'blue'
} = Astro.props;

const colorClasses: Record<string, { bg: string; border: string; focus: string; button: string }> = {
  blue: {
    bg: 'bg-blue-50',
    border: 'border-blue-200',
    focus: 'focus:ring-blue-500 focus:border-blue-500',
    button: 'bg-blue-600 hover:bg-blue-700'
  },
  rose: {
    bg: 'bg-rose-50',
    border: 'border-rose-200',
    focus: 'focus:ring-rose-500 focus:border-rose-500',
    button: 'bg-rose-600 hover:bg-rose-700'
  },
  purple: {
    bg: 'bg-purple-50',
    border: 'border-purple-200',
    focus: 'focus:ring-purple-500 focus:border-purple-500',
    button: 'bg-purple-600 hover:bg-purple-700'
  },
  slate: {
    bg: 'bg-slate-50',
    border: 'border-slate-200',
    focus: 'focus:ring-slate-500 focus:border-slate-500',
    button: 'bg-slate-600 hover:bg-slate-700'
  }
};

const colors = colorClasses[accentColor] || colorClasses.blue;
---

<div class={`rounded-xl ${colors.bg} p-6 md:p-8`}>
  <h3 class="text-2xl font-bold text-gray-900 mb-2">{title}</h3>
  <p class="text-gray-600 mb-6">{subtitle}</p>

  <form
    id="contact-form"
    action="https://formsubmit.co/info@royalcarriagelimo.com"
    method="POST"
    class="space-y-4"
  >
    <!-- Hidden fields for FormSubmit -->
    <input type="hidden" name="_subject" value={`New Contact from ${target} Website`} />
    <input type="hidden" name="_captcha" value="false" />
    <input type="hidden" name="_template" value="table" />
    <input type="hidden" name="_next" value={`https://${target === 'airport' ? 'chicagoairportblackcar' : target === 'corporate' ? 'chicagoexecutivecarservice' : target === 'wedding' ? 'chicagoweddingtransportation' : 'chicago-partybus'}.com/thank-you`} />
    <input type="hidden" name="source_website" value={target} />

    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
        <input
          type="text"
          id="name"
          name="name"
          required
          class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
          placeholder="John Smith"
        />
      </div>
      <div>
        <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number *</label>
        <input
          type="tel"
          id="phone"
          name="phone"
          required
          class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
          placeholder="(555) 123-4567"
        />
      </div>
    </div>

    <div>
      <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address *</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
        placeholder="john@example.com"
      />
    </div>

    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label for="service_type" class="block text-sm font-medium text-gray-700 mb-1">Service Type</label>
        <select
          id="service_type"
          name="service_type"
          class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
        >
          <option value="">Select a service...</option>
          <option value="airport_transfer">Airport Transfer</option>
          <option value="point_to_point">Point-to-Point</option>
          <option value="hourly_charter">Hourly Charter</option>
          <option value="wedding">Wedding Transportation</option>
          <option value="corporate">Corporate Travel</option>
          <option value="party_bus">Party Bus</option>
          <option value="special_event">Special Event</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div>
        <label for="event_date" class="block text-sm font-medium text-gray-700 mb-1">Event Date</label>
        <input
          type="date"
          id="event_date"
          name="event_date"
          class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
        />
      </div>
    </div>

    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label for="pickup_location" class="block text-sm font-medium text-gray-700 mb-1">Pickup Location</label>
        <input
          type="text"
          id="pickup_location"
          name="pickup_location"
          class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
          placeholder="Address or Airport"
        />
      </div>
      <div>
        <label for="dropoff_location" class="block text-sm font-medium text-gray-700 mb-1">Drop-off Location</label>
        <input
          type="text"
          id="dropoff_location"
          name="dropoff_location"
          class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
          placeholder="Address or Airport"
        />
      </div>
    </div>

    <div>
      <label for="passengers" class="block text-sm font-medium text-gray-700 mb-1">Number of Passengers</label>
      <select
        id="passengers"
        name="passengers"
        class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
      >
        <option value="">Select...</option>
        <option value="1-3">1-3 passengers</option>
        <option value="4-6">4-6 passengers</option>
        <option value="7-10">7-10 passengers</option>
        <option value="11-14">11-14 passengers</option>
        <option value="15-24">15-24 passengers</option>
        <option value="25-36">25-36 passengers</option>
        <option value="37+">37+ passengers</option>
      </select>
    </div>

    <div>
      <label for="message" class="block text-sm font-medium text-gray-700 mb-1">Additional Details</label>
      <textarea
        id="message"
        name="message"
        rows="4"
        class={`w-full px-4 py-3 border ${colors.border} rounded-lg ${colors.focus} transition`}
        placeholder="Tell us about your transportation needs, special requests, or any questions..."
      ></textarea>
    </div>

    <button
      type="submit"
      class={`w-full ${colors.button} text-white font-semibold py-4 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl`}
    >
      Submit Request
    </button>

    <p class="text-xs text-gray-500 text-center mt-4">
      By submitting this form, you agree to be contacted regarding your transportation inquiry.
      <br />Or call us directly at <a href="tel:+12248013090" class="font-semibold hover:underline">(224) 801-3090</a>
    </p>
  </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contact-form');

    form?.addEventListener('submit', (e) => {
      if (typeof window !== 'undefined' && (window as any).dataLayer) {
        (window as any).dataLayer.push({
          event: 'form_submit',
          eventCategory: 'Lead',
          eventAction: 'Contact Form Submit',
          eventLabel: 'Contact Request'
        });
      }
    });
  });
</script>
