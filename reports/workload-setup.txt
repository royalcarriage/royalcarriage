+/bin/zsh:2> gcloud iam workload-identity-pools create github-pool '--project=royalcarriagelimoseo' '--location=global' '--display-name=GitHub Actions Pool'
Created workload identity pool [github-pool].
+/bin/zsh:4> gcloud iam workload-identity-pools providers create-oidc github-provider '--project=royalcarriagelimoseo' '--location=global' '--workload-identity-pool=github-pool' '--issuer-uri=https://token.actions.githubusercontent.com' '--allowed-audiences=https://github.com/royalcarriage'
ERROR: (gcloud.iam.workload-identity-pools.providers.create-oidc) argument --attribute-mapping: Must be specified.
Usage: gcloud iam workload-identity-pools providers create-oidc (PROVIDER : --location=LOCATION --workload-identity-pool=WORKLOAD_IDENTITY_POOL) --attribute-mapping=[KEY=VALUE,...] --issuer-uri=ISSUER_URI [optional flags]
  optional flags may be  --allowed-audiences | --attribute-condition |
                         --description | --disabled | --display-name | --help |
                         --jwk-json-path | --location | --workload-identity-pool

For detailed information on this command and its flags, run:
  gcloud iam workload-identity-pools providers create-oidc --help
+/bin/zsh:6> gcloud iam service-accounts create github-deployer '--project=royalcarriagelimoseo' '--display-name=GitHub Actions Deployer'
Created service account [github-deployer].
+/bin/zsh:8> gcloud projects add-iam-policy-binding royalcarriagelimoseo '--member=serviceAccount:github-deployer@royalcarriagelimoseo.iam.gserviceaccount.com' '--role=roles/firebase.admin'
ERROR: (gcloud.projects.add-iam-policy-binding) Adding a binding without specifying a condition to a policy containing conditions is prohibited in non-interactive mode. Run the command again with `--condition=None`
+/bin/zsh:10> gcloud projects add-iam-policy-binding royalcarriagelimoseo '--member=serviceAccount:github-deployer@royalcarriagelimoseo.iam.gserviceaccount.com' '--role=roles/storage.admin'
ERROR: (gcloud.projects.add-iam-policy-binding) Adding a binding without specifying a condition to a policy containing conditions is prohibited in non-interactive mode. Run the command again with `--condition=None`
+/bin/zsh:12> gcloud iam service-accounts add-iam-policy-binding github-deployer@royalcarriagelimoseo.iam.gserviceaccount.com '--project=royalcarriagelimoseo' '--role=roles/iam.workloadIdentityUser' '--member=principalSet://iam.googleapis.com/projects/910418192896/locations/global/workloadIdentityPools/github-pool/attribute.repository/royalcarriage/royalcarriage'
Updated IAM policy for serviceAccount [github-deployer@royalcarriagelimoseo.iam.gserviceaccount.com].
bindings:
- members:
  - principalSet://iam.googleapis.com/projects/910418192896/locations/global/workloadIdentityPools/github-pool/attribute.repository/royalcarriage/royalcarriage
  role: roles/iam.workloadIdentityUser
etag: BwZId8TrRus=
version: 1
WORKLOAD_IDENTITY_PROVIDER=projects/910418192896/locations/global/workloadIdentityPools/github-pool/providers/github-provider
WORKLOAD_IDENTITY_SERVICE_ACCOUNT=github-deployer@royalcarriagelimoseo.iam.gserviceaccount.com
